<div class="container">
    <h2>Registro de Usuario</h2>
    <form [formGroup]="form" (ngSubmit)="handleSubmit()">

        <label for="email">Correo Electrónico</label>
        <input type="email" id="email" name="email" formControlName="email" required>
        @if (this.form.controls.email.invalid && this.form.controls.email.errors?.["formFailed"] === true) {
            @if (this.form.controls.email.errors?.["required"]) {
                <span>Este campo es obligatorio</span>
            }
            @if (this.form.controls.email.errors?.["email"]) {
                <span>Ingrese un email válido</span>
            }
        }

        <label for="name">Nombre</label>
        <input type="text" id="name" name="name" formControlName="name" required>
        @if (this.form.controls.name.invalid && this.form.controls.name.errors?.["formFailed"] === true) {
            @if (this.form.controls.name.errors?.["required"]) {
                <span>Este campo es obligatorio</span>
            }
            @if (this.form.controls.name.errors?.["pattern"]) {
                <span>Ingrese un nombre válido</span>
            }
        }

        <label for="surname">Apellido</label>
        <input type="text" id="surname" name="surname" formControlName="surname" required>
        @if (this.form.controls.surname.invalid && this.form.controls.surname.errors?.["formFailed"] === true) {
            @if (this.form.controls.surname.errors?.["required"]) {
                <span>Este campo es obligatorio</span>
            }
            @if (this.form.controls.surname.errors?.["pattern"]) {
                <span>Ingrese un apellido válido</span>
            }
        }

        <label for="password">Contraseña</label>
        <input type="password" id="password" name="password" formControlName="password" required>
        @if (this.form.controls.password.invalid && this.form.controls.password.errors?.["formFailed"] === true) {
            @if (this.form.controls.password.errors?.["required"]) {
                <span>Este campo es obligatorio</span>
            }
        }
        
        <label for="gender">Género</label>
        <select id="gender" name="gender" formControlName="gender" required>
            <option value="masculino">Masculino</option>
            <option value="femenino">Femenino</option>
        </select>
        @if (this.form.controls.gender.invalid && this.form.controls.gender.errors?.["formFailed"] === true) {
            @if (this.form.controls.gender.errors?.["required"]) {
                <span>Este campo es obligatorio</span>
            }
        }

        <label for="doc_type">Tipo de Documento</label>
        <select id="doc_type" name="doc_type" formControlName="doc_type" required>
            <option value="dni">DNI</option>
            <option value="carne_extranjeria">Carné de Extranjería</option>
        </select>
        @if (this.form.controls.doc_type.invalid && this.form.controls.doc_type.errors?.["formFailed"] === true) {
            @if (this.form.controls.doc_type.errors?.["required"]) {
                <span>Este campo es obligatorio</span>
            }
        }

        <label for="doc_number">Número de Documento</label>
        <input type= "text" id="doc_number" name="doc_number" formControlName="doc_number" required>
        @if (this.form.controls.doc_number.invalid && this.form.controls.doc_number.errors?.["formFailed"] === true) {
            @if (this.form.controls.doc_number.errors?.["required"]) {
                <span>Este campo es obligatorio</span>
            }
            @if (this.form.controls.doc_number.errors?.["pattern"] && this.form.controls.doc_type.value === "dni") {
                <span>El número de DNI debe tener 8 cifras</span>
            }
            @if (this.form.controls.doc_number.errors?.["pattern"] && this.form.controls.doc_type.value === "carne_extranjeria") {
                <span>El número de carné de extranjería debe tener 9 cifras</span>
            }
        }

        <label for="phone">Teléfono</label>
        <input type="text" id="phone" name="phone" formControlName="phone" required>
        @if (this.form.controls.phone.invalid && this.form.controls.phone.errors?.["formFailed"] === true) {
            @if (this.form.controls.phone.errors?.["required"]) {
                <span>Este campo es obligatorio</span>
            }
            @if (this.form.controls.phone.errors?.["pattern"]) {
                <span>Ingrese un número de teléfono válido</span>
            }
            @if (this.form.controls.phone.errors?.["minlength"] || this.form.controls.phone.errors?.["maxlength"]) {
                <span>Debe ingresar un número con 9-15 dígitos</span>
            }
        }

        <button type="submit">Registrarse</button>
    </form> 
</div>